(function(app){
    'use strict';

    // #
    var informationTemplate = [
        '<div class="schema__information" id="schema-information"></div>'
    ].join(' ');

    app.component('information', {
        template: informationTemplate,
        controller: function () {}
    });

    // #
    var overlayTemplate = [
        '<div class="schema__overlay">',
            // '<object type="image/svg+xml" ng-attr-data="{{$ctrl.svg}}"></object>',

            '<svg version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 984 601" ng-click="overlay.click();">',

                '<g fill="#830AAF" data-name="Объект 1" data-number="1">',
                    '<rect x="247.497" y="0.002" width="243" height="232"></rect>',
                '</g>',
                
                '<g fill="#AE181E" data-name="Объект 2" data-number="2">',
                    '<rect x="0.497" y="232.002" width="243" height="137"></rect>',
                '</g>',
                
                '<g fill="#45D50A" data-name="Объект 3" data-number="3">',
                    '<rect x="493.497" y="232.002" width="243" height="137"></rect>',
                '</g>',

                '<g fill="#27D2EB" data-name="Объект 4" data-number="4">',
                    '<rect x="740.496" y="232.002" width="243" height="137"></rect>',
                '</g>',
                
                '<g fill="#DC4E75" data-name="Объект 5" data-number="5">',
                    '<rect x="247.497" y="369.002" width="243" height="232"></rect>',
                '</g>',

            '</svg>',

        '</div>'
    ].join(' ');
    
    app.directive('overlay', function() {
        return {
            restrict: 'E',
            scope: { svg: '=' },
            template: overlayTemplate,
            replace: true
        }
    });

    app.component('overlay1', {
        bindings: {
            svg: '='
        },
        template: overlayTemplate,
        controller: function () {

            console.log(this.svg);

            this.click = function(e) {
                alert("click");
                console.log("click", e.target, e.target.nodeName);
            }

            // var statusElm = angular.element(element[0].getSVGDocument().getElementById("status"));

            // statusElm.on("click", function(event) {
            //     scope.$apply(function() {
            //         scope.currentStatus='alert';
            //     });
            // });

            // var $schema = document.getElementById("schema"),
            //     $info = document.getElementById("schema-information"),
            //     $plots = $schema.querySelectorAll("g"),
            //     $plot = null, x = 0;

            // for (x in $plots)
            // {
            //     if (typeof($plots[x]) == 'object' && typeof($plots[x].getAttribute('data-hover')) !== 'undefined')
            //     {
            //         $plots[x].style.color = $plots[x].getAttribute('data-hover');    
            //     }
            // }
        }
    });

    // #
    app.component('background', {
        bindings: { src: '<' },
        template: [
            '<div class="schema__background">',
                '<img src="{{$ctrl.src}}" width="100%" height="100%" alt="">',
            '</div>'
        ].join(' ')
    });

})(angular.module('app', []));

// var app = angular.module('app', []);

// var schema = [
//     '<div class="schema">',
//         '<div class="schema__information" id="schema-information"></div>',

//         '<div class="navbar-header">',
//             '<a class="navbar-brand" href="#">{{$ctrl.brand}}</a>',
//         '</div>',
//         '<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">',
//             '<ul class="nav navbar-nav">',
//                 '<li ng-repeat="menu in $ctrl.menu">',
//                     '<a href="{{menu.component}}">{{menu.name}} <span class="sr-only">(current)</span></a>',
//                 '</li>',
//             '</ul>',
//         '</div>',
//     '</div>'
// ];

// app.component('schema', {
//     bindings: { brand: '<' },
//     template: schema,
//     controller: function () {
//         this.menu = [
//             {
//                 name: 'Home',
//                 component: 'home'
//             },
//             {
//                 name: 'About',
//                 component: 'about'
//             },
//             {
//                 name: 'Contact',
//                 component: 'contact'
//             }
//         ];
//     }
// });

// var navbar = [
//     '<nav class="navbar navbar-default">',
//         '<div class="container">',
//             '<div class="navbar-header">',
//                 '<a class="navbar-brand" href="#">{{$ctrl.brand}}</a>',
//             '</div>',
//             '<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">',
//                 '<ul class="nav navbar-nav">',
//                     '<li ng-repeat="menu in $ctrl.menu">',
//                         '<a href="{{menu.component}}">{{menu.name}} <span class="sr-only">(current)</span></a>',
//                     '</li>',
//                 '</ul>',
//             '</div>',
//         '</div>',
//     '</nav>'
// ].join(' ');

// app.component('menuBar', {
//     bindings: { brand: '<' },
//     template: navbar,
//     controller: function () {
//         this.menu = [
//             {
//                 name: 'Home',
//                 component: 'home'
//             },
//             {
//                 name: 'About',
//                 component: 'about'
//             },
//             {
//                 name: 'Contact',
//                 component: 'contact'
//             }
//         ];
//     }
// });

// var userInfo = [
//     '<div class="container">',
//     '<table class="table table-bordered">',
//     '<tr><td id="caption" colspan="4">{{$ctrl.name}}</td></tr>',
//     '<th><td>Name</td><td>City</td><td>Country</td></th>',
//     '<tr ng-repeat="user in $ctrl.records">',
//     '<td></td>',
//     '<td>{{user.name}}</td>',
//     '<td>{{user.city}}</td>',
//     '<td>{{user.country}}</td>',
//     '</tr>',
//     '</table>',
//     '</div>'
// ].join(' ');

// app.component('userInfo', {
//     bindings: { name: '<' },
//     template: userInfo,
//     controller: function () {
//         this.records = [
//             {
//                 name: 'Alfreds Futterkiste',
//                 city: 'Berlin',
//                 country: 'Germany'
//             },
//             {
//                 name: 'Ana Trujillo Emparedados y helados',
//                 city: 'M\xE9xico D.F.',
//                 country: 'Mexico'
//             },
//             {
//                 name: 'Blondel p\xE8re et fils',
//                 city: 'Strasbourg',
//                 country: 'France'
//             },
//             {
//                 name: 'B\xF3lido Comidas preparadas',
//                 city: 'Madrid',
//                 country: 'Spain'
//             }
//         ];
//     }
// });
// "use strict";

// var $schema = document.getElementById("schema"),
//     $info = document.getElementById("schema-information"),
//     $plots = $schema.querySelectorAll("g"),
//     $plot = null, x = 0;

// for (x in $plots)
// {
//     if (typeof($plots[x]) == 'object' && typeof($plots[x].getAttribute('data-hover')) !== 'undefined')
//     {
//         $plots[x].style.color = $plots[x].getAttribute('data-hover');    
//     }
// }

// $schema.addEventListener("click", function(e) {

//     console.log("click", e.target, e.target.nodeName);

//     if (e.target.nodeName == "rect")
//     {
//         $plot = e.target.parentNode;
        
//         for (x=0; x < $plots.length; x++)
//         {
//             $plots[x].classList.remove("is-animate");
//         }

//         $info.innerHTML = '';

//         $info.innerHTML = [
//             '<h3>№ ', $plot.getAttribute('data-number'), '</h3>',
//             '<p>', $plot.getAttribute('data-name'), '</p>',
//         ].join('');
    
//         $plot.classList.add("is-animate");
//     }

// });

// var app = angular.module('app',[]);

// app.component('ourComponent', {
//     // Binds the attibute data to the component controller.
//     bindings: {
//         data: '@'
//     },

//     // We can now access the data from the data attribute with `$ctrl`
//     template:'<p>{{ $ctrl.data }}</p>'
// });

// app.directive('listDirective', function () {
//     return {
//         // Isolated scope binding
//         scope: {
//             message: '='
//         },
//         // Inline template which is binded to message variable in the component controller
//         template: '<div>Hello {{$ctrl.message}}</div>',
//         // The controller that handles our component logic
//         controller: function () {
//                 this.message = "Thomas directive"
//         },
//         //defaults, automatically set when using .component()
//         controllerAs: '$ctrl',
//         bindToController: true
//     };
// });

// app.component('listComponent', {
//     // isolated scope binding
//     bindings: {
//         message: '='
//     },

//     // Inline template which is binded to message variable
//     // in the component controller
//     template:'<div>Hello {{$ctrl.message}}</div>',

//     // The controller that handles our component logic
//     controller: function () {
//         this.message = "Thomas component"
//     }
// });
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMvTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoibWFwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbihhcHApe1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIC8vICNcbiAgICB2YXIgaW5mb3JtYXRpb25UZW1wbGF0ZSA9IFtcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzY2hlbWFfX2luZm9ybWF0aW9uXCIgaWQ9XCJzY2hlbWEtaW5mb3JtYXRpb25cIj48L2Rpdj4nXG4gICAgXS5qb2luKCcgJyk7XG5cbiAgICBhcHAuY29tcG9uZW50KCdpbmZvcm1hdGlvbicsIHtcbiAgICAgICAgdGVtcGxhdGU6IGluZm9ybWF0aW9uVGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHt9XG4gICAgfSk7XG5cbiAgICAvLyAjXG4gICAgdmFyIG92ZXJsYXlUZW1wbGF0ZSA9IFtcbiAgICAgICAgJzxkaXYgY2xhc3M9XCJzY2hlbWFfX292ZXJsYXlcIj4nLFxuICAgICAgICAgICAgLy8gJzxvYmplY3QgdHlwZT1cImltYWdlL3N2Zyt4bWxcIiBuZy1hdHRyLWRhdGE9XCJ7eyRjdHJsLnN2Z319XCI+PC9vYmplY3Q+JyxcblxuICAgICAgICAgICAgJzxzdmcgdmVyc2lvbj1cIjEuMVwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDk4NCA2MDFcIiBuZy1jbGljaz1cIm92ZXJsYXkuY2xpY2soKTtcIj4nLFxuXG4gICAgICAgICAgICAgICAgJzxnIGZpbGw9XCIjODMwQUFGXCIgZGF0YS1uYW1lPVwi0J7QsdGK0LXQutGCIDFcIiBkYXRhLW51bWJlcj1cIjFcIj4nLFxuICAgICAgICAgICAgICAgICAgICAnPHJlY3QgeD1cIjI0Ny40OTdcIiB5PVwiMC4wMDJcIiB3aWR0aD1cIjI0M1wiIGhlaWdodD1cIjIzMlwiPjwvcmVjdD4nLFxuICAgICAgICAgICAgICAgICc8L2c+JyxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAnPGcgZmlsbD1cIiNBRTE4MUVcIiBkYXRhLW5hbWU9XCLQntCx0YrQtdC60YIgMlwiIGRhdGEtbnVtYmVyPVwiMlwiPicsXG4gICAgICAgICAgICAgICAgICAgICc8cmVjdCB4PVwiMC40OTdcIiB5PVwiMjMyLjAwMlwiIHdpZHRoPVwiMjQzXCIgaGVpZ2h0PVwiMTM3XCI+PC9yZWN0PicsXG4gICAgICAgICAgICAgICAgJzwvZz4nLFxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICc8ZyBmaWxsPVwiIzQ1RDUwQVwiIGRhdGEtbmFtZT1cItCe0LHRitC10LrRgiAzXCIgZGF0YS1udW1iZXI9XCIzXCI+JyxcbiAgICAgICAgICAgICAgICAgICAgJzxyZWN0IHg9XCI0OTMuNDk3XCIgeT1cIjIzMi4wMDJcIiB3aWR0aD1cIjI0M1wiIGhlaWdodD1cIjEzN1wiPjwvcmVjdD4nLFxuICAgICAgICAgICAgICAgICc8L2c+JyxcblxuICAgICAgICAgICAgICAgICc8ZyBmaWxsPVwiIzI3RDJFQlwiIGRhdGEtbmFtZT1cItCe0LHRitC10LrRgiA0XCIgZGF0YS1udW1iZXI9XCI0XCI+JyxcbiAgICAgICAgICAgICAgICAgICAgJzxyZWN0IHg9XCI3NDAuNDk2XCIgeT1cIjIzMi4wMDJcIiB3aWR0aD1cIjI0M1wiIGhlaWdodD1cIjEzN1wiPjwvcmVjdD4nLFxuICAgICAgICAgICAgICAgICc8L2c+JyxcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAnPGcgZmlsbD1cIiNEQzRFNzVcIiBkYXRhLW5hbWU9XCLQntCx0YrQtdC60YIgNVwiIGRhdGEtbnVtYmVyPVwiNVwiPicsXG4gICAgICAgICAgICAgICAgICAgICc8cmVjdCB4PVwiMjQ3LjQ5N1wiIHk9XCIzNjkuMDAyXCIgd2lkdGg9XCIyNDNcIiBoZWlnaHQ9XCIyMzJcIj48L3JlY3Q+JyxcbiAgICAgICAgICAgICAgICAnPC9nPicsXG5cbiAgICAgICAgICAgICc8L3N2Zz4nLFxuXG4gICAgICAgICc8L2Rpdj4nXG4gICAgXS5qb2luKCcgJyk7XG4gICAgXG4gICAgYXBwLmRpcmVjdGl2ZSgnb3ZlcmxheScsIGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgcmVzdHJpY3Q6ICdFJyxcbiAgICAgICAgICAgIHNjb3BlOiB7IHN2ZzogJz0nIH0sXG4gICAgICAgICAgICB0ZW1wbGF0ZTogb3ZlcmxheVRlbXBsYXRlLFxuICAgICAgICAgICAgcmVwbGFjZTogdHJ1ZVxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBhcHAuY29tcG9uZW50KCdvdmVybGF5MScsIHtcbiAgICAgICAgYmluZGluZ3M6IHtcbiAgICAgICAgICAgIHN2ZzogJz0nXG4gICAgICAgIH0sXG4gICAgICAgIHRlbXBsYXRlOiBvdmVybGF5VGVtcGxhdGUsXG4gICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5zdmcpO1xuXG4gICAgICAgICAgICB0aGlzLmNsaWNrID0gZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgIGFsZXJ0KFwiY2xpY2tcIik7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCJjbGlja1wiLCBlLnRhcmdldCwgZS50YXJnZXQubm9kZU5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyB2YXIgc3RhdHVzRWxtID0gYW5ndWxhci5lbGVtZW50KGVsZW1lbnRbMF0uZ2V0U1ZHRG9jdW1lbnQoKS5nZXRFbGVtZW50QnlJZChcInN0YXR1c1wiKSk7XG5cbiAgICAgICAgICAgIC8vIHN0YXR1c0VsbS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKGV2ZW50KSB7XG4gICAgICAgICAgICAvLyAgICAgc2NvcGUuJGFwcGx5KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gICAgICAgICBzY29wZS5jdXJyZW50U3RhdHVzPSdhbGVydCc7XG4gICAgICAgICAgICAvLyAgICAgfSk7XG4gICAgICAgICAgICAvLyB9KTtcblxuICAgICAgICAgICAgLy8gdmFyICRzY2hlbWEgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNjaGVtYVwiKSxcbiAgICAgICAgICAgIC8vICAgICAkaW5mbyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NoZW1hLWluZm9ybWF0aW9uXCIpLFxuICAgICAgICAgICAgLy8gICAgICRwbG90cyA9ICRzY2hlbWEucXVlcnlTZWxlY3RvckFsbChcImdcIiksXG4gICAgICAgICAgICAvLyAgICAgJHBsb3QgPSBudWxsLCB4ID0gMDtcblxuICAgICAgICAgICAgLy8gZm9yICh4IGluICRwbG90cylcbiAgICAgICAgICAgIC8vIHtcbiAgICAgICAgICAgIC8vICAgICBpZiAodHlwZW9mKCRwbG90c1t4XSkgPT0gJ29iamVjdCcgJiYgdHlwZW9mKCRwbG90c1t4XS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaG92ZXInKSkgIT09ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgLy8gICAgIHtcbiAgICAgICAgICAgIC8vICAgICAgICAgJHBsb3RzW3hdLnN0eWxlLmNvbG9yID0gJHBsb3RzW3hdLmdldEF0dHJpYnV0ZSgnZGF0YS1ob3ZlcicpOyAgICBcbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vICNcbiAgICBhcHAuY29tcG9uZW50KCdiYWNrZ3JvdW5kJywge1xuICAgICAgICBiaW5kaW5nczogeyBzcmM6ICc8JyB9LFxuICAgICAgICB0ZW1wbGF0ZTogW1xuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzY2hlbWFfX2JhY2tncm91bmRcIj4nLFxuICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cInt7JGN0cmwuc3JjfX1cIiB3aWR0aD1cIjEwMCVcIiBoZWlnaHQ9XCIxMDAlXCIgYWx0PVwiXCI+JyxcbiAgICAgICAgICAgICc8L2Rpdj4nXG4gICAgICAgIF0uam9pbignICcpXG4gICAgfSk7XG5cbn0pKGFuZ3VsYXIubW9kdWxlKCdhcHAnLCBbXSkpO1xuXG4vLyB2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtdKTtcblxuLy8gdmFyIHNjaGVtYSA9IFtcbi8vICAgICAnPGRpdiBjbGFzcz1cInNjaGVtYVwiPicsXG4vLyAgICAgICAgICc8ZGl2IGNsYXNzPVwic2NoZW1hX19pbmZvcm1hdGlvblwiIGlkPVwic2NoZW1hLWluZm9ybWF0aW9uXCI+PC9kaXY+JyxcblxuLy8gICAgICAgICAnPGRpdiBjbGFzcz1cIm5hdmJhci1oZWFkZXJcIj4nLFxuLy8gICAgICAgICAgICAgJzxhIGNsYXNzPVwibmF2YmFyLWJyYW5kXCIgaHJlZj1cIiNcIj57eyRjdHJsLmJyYW5kfX08L2E+Jyxcbi8vICAgICAgICAgJzwvZGl2PicsXG4vLyAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29sbGFwc2UgbmF2YmFyLWNvbGxhcHNlXCIgaWQ9XCJicy1leGFtcGxlLW5hdmJhci1jb2xsYXBzZS0xXCI+Jyxcbi8vICAgICAgICAgICAgICc8dWwgY2xhc3M9XCJuYXYgbmF2YmFyLW5hdlwiPicsXG4vLyAgICAgICAgICAgICAgICAgJzxsaSBuZy1yZXBlYXQ9XCJtZW51IGluICRjdHJsLm1lbnVcIj4nLFxuLy8gICAgICAgICAgICAgICAgICAgICAnPGEgaHJlZj1cInt7bWVudS5jb21wb25lbnR9fVwiPnt7bWVudS5uYW1lfX0gPHNwYW4gY2xhc3M9XCJzci1vbmx5XCI+KGN1cnJlbnQpPC9zcGFuPjwvYT4nLFxuLy8gICAgICAgICAgICAgICAgICc8L2xpPicsXG4vLyAgICAgICAgICAgICAnPC91bD4nLFxuLy8gICAgICAgICAnPC9kaXY+Jyxcbi8vICAgICAnPC9kaXY+J1xuLy8gXTtcblxuLy8gYXBwLmNvbXBvbmVudCgnc2NoZW1hJywge1xuLy8gICAgIGJpbmRpbmdzOiB7IGJyYW5kOiAnPCcgfSxcbi8vICAgICB0ZW1wbGF0ZTogc2NoZW1hLFxuLy8gICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgdGhpcy5tZW51ID0gW1xuLy8gICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICAgIG5hbWU6ICdIb21lJyxcbi8vICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdob21lJ1xuLy8gICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgIHtcbi8vICAgICAgICAgICAgICAgICBuYW1lOiAnQWJvdXQnLFxuLy8gICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2Fib3V0J1xuLy8gICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgIHtcbi8vICAgICAgICAgICAgICAgICBuYW1lOiAnQ29udGFjdCcsXG4vLyAgICAgICAgICAgICAgICAgY29tcG9uZW50OiAnY29udGFjdCdcbi8vICAgICAgICAgICAgIH1cbi8vICAgICAgICAgXTtcbi8vICAgICB9XG4vLyB9KTtcblxuLy8gdmFyIG5hdmJhciA9IFtcbi8vICAgICAnPG5hdiBjbGFzcz1cIm5hdmJhciBuYXZiYXItZGVmYXVsdFwiPicsXG4vLyAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29udGFpbmVyXCI+Jyxcbi8vICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwibmF2YmFyLWhlYWRlclwiPicsXG4vLyAgICAgICAgICAgICAgICAgJzxhIGNsYXNzPVwibmF2YmFyLWJyYW5kXCIgaHJlZj1cIiNcIj57eyRjdHJsLmJyYW5kfX08L2E+Jyxcbi8vICAgICAgICAgICAgICc8L2Rpdj4nLFxuLy8gICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb2xsYXBzZSBuYXZiYXItY29sbGFwc2VcIiBpZD1cImJzLWV4YW1wbGUtbmF2YmFyLWNvbGxhcHNlLTFcIj4nLFxuLy8gICAgICAgICAgICAgICAgICc8dWwgY2xhc3M9XCJuYXYgbmF2YmFyLW5hdlwiPicsXG4vLyAgICAgICAgICAgICAgICAgICAgICc8bGkgbmctcmVwZWF0PVwibWVudSBpbiAkY3RybC5tZW51XCI+Jyxcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICc8YSBocmVmPVwie3ttZW51LmNvbXBvbmVudH19XCI+e3ttZW51Lm5hbWV9fSA8c3BhbiBjbGFzcz1cInNyLW9ubHlcIj4oY3VycmVudCk8L3NwYW4+PC9hPicsXG4vLyAgICAgICAgICAgICAgICAgICAgICc8L2xpPicsXG4vLyAgICAgICAgICAgICAgICAgJzwvdWw+Jyxcbi8vICAgICAgICAgICAgICc8L2Rpdj4nLFxuLy8gICAgICAgICAnPC9kaXY+Jyxcbi8vICAgICAnPC9uYXY+J1xuLy8gXS5qb2luKCcgJyk7XG5cbi8vIGFwcC5jb21wb25lbnQoJ21lbnVCYXInLCB7XG4vLyAgICAgYmluZGluZ3M6IHsgYnJhbmQ6ICc8JyB9LFxuLy8gICAgIHRlbXBsYXRlOiBuYXZiYXIsXG4vLyAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICB0aGlzLm1lbnUgPSBbXG4vLyAgICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICAgICAgbmFtZTogJ0hvbWUnLFxuLy8gICAgICAgICAgICAgICAgIGNvbXBvbmVudDogJ2hvbWUnXG4vLyAgICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICAgIG5hbWU6ICdBYm91dCcsXG4vLyAgICAgICAgICAgICAgICAgY29tcG9uZW50OiAnYWJvdXQnXG4vLyAgICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICAgIG5hbWU6ICdDb250YWN0Jyxcbi8vICAgICAgICAgICAgICAgICBjb21wb25lbnQ6ICdjb250YWN0J1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICBdO1xuLy8gICAgIH1cbi8vIH0pO1xuXG4vLyB2YXIgdXNlckluZm8gPSBbXG4vLyAgICAgJzxkaXYgY2xhc3M9XCJjb250YWluZXJcIj4nLFxuLy8gICAgICc8dGFibGUgY2xhc3M9XCJ0YWJsZSB0YWJsZS1ib3JkZXJlZFwiPicsXG4vLyAgICAgJzx0cj48dGQgaWQ9XCJjYXB0aW9uXCIgY29sc3Bhbj1cIjRcIj57eyRjdHJsLm5hbWV9fTwvdGQ+PC90cj4nLFxuLy8gICAgICc8dGg+PHRkPk5hbWU8L3RkPjx0ZD5DaXR5PC90ZD48dGQ+Q291bnRyeTwvdGQ+PC90aD4nLFxuLy8gICAgICc8dHIgbmctcmVwZWF0PVwidXNlciBpbiAkY3RybC5yZWNvcmRzXCI+Jyxcbi8vICAgICAnPHRkPjwvdGQ+Jyxcbi8vICAgICAnPHRkPnt7dXNlci5uYW1lfX08L3RkPicsXG4vLyAgICAgJzx0ZD57e3VzZXIuY2l0eX19PC90ZD4nLFxuLy8gICAgICc8dGQ+e3t1c2VyLmNvdW50cnl9fTwvdGQ+Jyxcbi8vICAgICAnPC90cj4nLFxuLy8gICAgICc8L3RhYmxlPicsXG4vLyAgICAgJzwvZGl2Pidcbi8vIF0uam9pbignICcpO1xuXG4vLyBhcHAuY29tcG9uZW50KCd1c2VySW5mbycsIHtcbi8vICAgICBiaW5kaW5nczogeyBuYW1lOiAnPCcgfSxcbi8vICAgICB0ZW1wbGF0ZTogdXNlckluZm8sXG4vLyAgICAgY29udHJvbGxlcjogZnVuY3Rpb24gKCkge1xuLy8gICAgICAgICB0aGlzLnJlY29yZHMgPSBbXG4vLyAgICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICAgICAgbmFtZTogJ0FsZnJlZHMgRnV0dGVya2lzdGUnLFxuLy8gICAgICAgICAgICAgICAgIGNpdHk6ICdCZXJsaW4nLFxuLy8gICAgICAgICAgICAgICAgIGNvdW50cnk6ICdHZXJtYW55J1xuLy8gICAgICAgICAgICAgfSxcbi8vICAgICAgICAgICAgIHtcbi8vICAgICAgICAgICAgICAgICBuYW1lOiAnQW5hIFRydWppbGxvIEVtcGFyZWRhZG9zIHkgaGVsYWRvcycsXG4vLyAgICAgICAgICAgICAgICAgY2l0eTogJ01cXHhFOXhpY28gRC5GLicsXG4vLyAgICAgICAgICAgICAgICAgY291bnRyeTogJ01leGljbydcbi8vICAgICAgICAgICAgIH0sXG4vLyAgICAgICAgICAgICB7XG4vLyAgICAgICAgICAgICAgICAgbmFtZTogJ0Jsb25kZWwgcFxceEU4cmUgZXQgZmlscycsXG4vLyAgICAgICAgICAgICAgICAgY2l0eTogJ1N0cmFzYm91cmcnLFxuLy8gICAgICAgICAgICAgICAgIGNvdW50cnk6ICdGcmFuY2UnXG4vLyAgICAgICAgICAgICB9LFxuLy8gICAgICAgICAgICAge1xuLy8gICAgICAgICAgICAgICAgIG5hbWU6ICdCXFx4RjNsaWRvIENvbWlkYXMgcHJlcGFyYWRhcycsXG4vLyAgICAgICAgICAgICAgICAgY2l0eTogJ01hZHJpZCcsXG4vLyAgICAgICAgICAgICAgICAgY291bnRyeTogJ1NwYWluJ1xuLy8gICAgICAgICAgICAgfVxuLy8gICAgICAgICBdO1xuLy8gICAgIH1cbi8vIH0pOyIsIi8vIFwidXNlIHN0cmljdFwiO1xuXG4vLyB2YXIgJHNjaGVtYSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2NoZW1hXCIpLFxuLy8gICAgICRpbmZvID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJzY2hlbWEtaW5mb3JtYXRpb25cIiksXG4vLyAgICAgJHBsb3RzID0gJHNjaGVtYS5xdWVyeVNlbGVjdG9yQWxsKFwiZ1wiKSxcbi8vICAgICAkcGxvdCA9IG51bGwsIHggPSAwO1xuXG4vLyBmb3IgKHggaW4gJHBsb3RzKVxuLy8ge1xuLy8gICAgIGlmICh0eXBlb2YoJHBsb3RzW3hdKSA9PSAnb2JqZWN0JyAmJiB0eXBlb2YoJHBsb3RzW3hdLmdldEF0dHJpYnV0ZSgnZGF0YS1ob3ZlcicpKSAhPT0gJ3VuZGVmaW5lZCcpXG4vLyAgICAge1xuLy8gICAgICAgICAkcGxvdHNbeF0uc3R5bGUuY29sb3IgPSAkcGxvdHNbeF0uZ2V0QXR0cmlidXRlKCdkYXRhLWhvdmVyJyk7ICAgIFxuLy8gICAgIH1cbi8vIH1cblxuLy8gJHNjaGVtYS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgZnVuY3Rpb24oZSkge1xuXG4vLyAgICAgY29uc29sZS5sb2coXCJjbGlja1wiLCBlLnRhcmdldCwgZS50YXJnZXQubm9kZU5hbWUpO1xuXG4vLyAgICAgaWYgKGUudGFyZ2V0Lm5vZGVOYW1lID09IFwicmVjdFwiKVxuLy8gICAgIHtcbi8vICAgICAgICAgJHBsb3QgPSBlLnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICBcbi8vICAgICAgICAgZm9yICh4PTA7IHggPCAkcGxvdHMubGVuZ3RoOyB4KyspXG4vLyAgICAgICAgIHtcbi8vICAgICAgICAgICAgICRwbG90c1t4XS5jbGFzc0xpc3QucmVtb3ZlKFwiaXMtYW5pbWF0ZVwiKTtcbi8vICAgICAgICAgfVxuXG4vLyAgICAgICAgICRpbmZvLmlubmVySFRNTCA9ICcnO1xuXG4vLyAgICAgICAgICRpbmZvLmlubmVySFRNTCA9IFtcbi8vICAgICAgICAgICAgICc8aDM+4oSWICcsICRwbG90LmdldEF0dHJpYnV0ZSgnZGF0YS1udW1iZXInKSwgJzwvaDM+Jyxcbi8vICAgICAgICAgICAgICc8cD4nLCAkcGxvdC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbmFtZScpLCAnPC9wPicsXG4vLyAgICAgICAgIF0uam9pbignJyk7XG4gICAgXG4vLyAgICAgICAgICRwbG90LmNsYXNzTGlzdC5hZGQoXCJpcy1hbmltYXRlXCIpO1xuLy8gICAgIH1cblxuLy8gfSk7XG5cbi8vIHZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnYXBwJyxbXSk7XG5cbi8vIGFwcC5jb21wb25lbnQoJ291ckNvbXBvbmVudCcsIHtcbi8vICAgICAvLyBCaW5kcyB0aGUgYXR0aWJ1dGUgZGF0YSB0byB0aGUgY29tcG9uZW50IGNvbnRyb2xsZXIuXG4vLyAgICAgYmluZGluZ3M6IHtcbi8vICAgICAgICAgZGF0YTogJ0AnXG4vLyAgICAgfSxcblxuLy8gICAgIC8vIFdlIGNhbiBub3cgYWNjZXNzIHRoZSBkYXRhIGZyb20gdGhlIGRhdGEgYXR0cmlidXRlIHdpdGggYCRjdHJsYFxuLy8gICAgIHRlbXBsYXRlOic8cD57eyAkY3RybC5kYXRhIH19PC9wPidcbi8vIH0pO1xuXG4vLyBhcHAuZGlyZWN0aXZlKCdsaXN0RGlyZWN0aXZlJywgZnVuY3Rpb24gKCkge1xuLy8gICAgIHJldHVybiB7XG4vLyAgICAgICAgIC8vIElzb2xhdGVkIHNjb3BlIGJpbmRpbmdcbi8vICAgICAgICAgc2NvcGU6IHtcbi8vICAgICAgICAgICAgIG1lc3NhZ2U6ICc9J1xuLy8gICAgICAgICB9LFxuLy8gICAgICAgICAvLyBJbmxpbmUgdGVtcGxhdGUgd2hpY2ggaXMgYmluZGVkIHRvIG1lc3NhZ2UgdmFyaWFibGUgaW4gdGhlIGNvbXBvbmVudCBjb250cm9sbGVyXG4vLyAgICAgICAgIHRlbXBsYXRlOiAnPGRpdj5IZWxsbyB7eyRjdHJsLm1lc3NhZ2V9fTwvZGl2PicsXG4vLyAgICAgICAgIC8vIFRoZSBjb250cm9sbGVyIHRoYXQgaGFuZGxlcyBvdXIgY29tcG9uZW50IGxvZ2ljXG4vLyAgICAgICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2UgPSBcIlRob21hcyBkaXJlY3RpdmVcIlxuLy8gICAgICAgICB9LFxuLy8gICAgICAgICAvL2RlZmF1bHRzLCBhdXRvbWF0aWNhbGx5IHNldCB3aGVuIHVzaW5nIC5jb21wb25lbnQoKVxuLy8gICAgICAgICBjb250cm9sbGVyQXM6ICckY3RybCcsXG4vLyAgICAgICAgIGJpbmRUb0NvbnRyb2xsZXI6IHRydWVcbi8vICAgICB9O1xuLy8gfSk7XG5cbi8vIGFwcC5jb21wb25lbnQoJ2xpc3RDb21wb25lbnQnLCB7XG4vLyAgICAgLy8gaXNvbGF0ZWQgc2NvcGUgYmluZGluZ1xuLy8gICAgIGJpbmRpbmdzOiB7XG4vLyAgICAgICAgIG1lc3NhZ2U6ICc9J1xuLy8gICAgIH0sXG5cbi8vICAgICAvLyBJbmxpbmUgdGVtcGxhdGUgd2hpY2ggaXMgYmluZGVkIHRvIG1lc3NhZ2UgdmFyaWFibGVcbi8vICAgICAvLyBpbiB0aGUgY29tcG9uZW50IGNvbnRyb2xsZXJcbi8vICAgICB0ZW1wbGF0ZTonPGRpdj5IZWxsbyB7eyRjdHJsLm1lc3NhZ2V9fTwvZGl2PicsXG5cbi8vICAgICAvLyBUaGUgY29udHJvbGxlciB0aGF0IGhhbmRsZXMgb3VyIGNvbXBvbmVudCBsb2dpY1xuLy8gICAgIGNvbnRyb2xsZXI6IGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgdGhpcy5tZXNzYWdlID0gXCJUaG9tYXMgY29tcG9uZW50XCJcbi8vICAgICB9XG4vLyB9KTsiXX0=
